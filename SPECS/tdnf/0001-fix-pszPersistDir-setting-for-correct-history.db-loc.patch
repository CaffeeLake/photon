From f480ba7bbd24da43aa999aaed3f47664ffaecd50 Mon Sep 17 00:00:00 2001
From: Oliver Kurth <okurth@gmail.com>
Date: Thu, 9 Mar 2023 20:40:17 -0800
Subject: [PATCH 1/4] fix pszPersistDir setting for correct history.db location

---
 client/config.c | 2 ++
 client/utils.c  | 2 +-
 2 files changed, 3 insertions(+), 1 deletion(-)

diff --git a/client/config.c b/client/config.c
index 73e294a..8d0128a 100644
--- a/client/config.c
+++ b/client/config.c
@@ -238,6 +238,8 @@ TDNFReadConfig(
         pConf->pszCacheDir = strdup(TDNF_DEFAULT_CACHE_LOCATION);
     if (pConf->pszDistroVerPkg == NULL)
         pConf->pszDistroVerPkg = strdup(TDNF_DEFAULT_DISTROVERPKG);
+    if (pConf->pszPersistDir == NULL)
+        pConf->pszPersistDir = strdup(TDNF_DEFAULT_DB_LOCATION);
 
     /* We need a copy of pszConfFile because dirname() modifies its argument */
     dwError = TDNFAllocateString(pszConfFile, &pszConfFileCopy);
diff --git a/client/utils.c b/client/utils.c
index bfafe77..d5ae62b 100644
--- a/client/utils.c
+++ b/client/utils.c
@@ -266,7 +266,7 @@ TDNFIsFileOrSymlink(
     if(stat(pszPath, &stStat))
     {
         if (errno == ENOENT)
-	{
+        {
             nPathIsFile = 0;
         }
         else
-- 
2.25.1

